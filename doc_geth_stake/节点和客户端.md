以太坊是一个由计算机组成的分布式网络，这些计算机运行可验证区块和交易数据的软件，称为节点。 软件应用程序（客户端）必须在电脑上运行，将你的电脑变成一个以太坊节点。

> 注意：现在再也不能仅运行执行客户端了。 合并后，执行客户端和共识客户端必须一起运行，用户才能够访问以太坊网络。

## 什么是节点和客户端？
“节点”是指任何以太坊客户端软件的实例，它连接到也运行以太坊软件的其他计算机，形成一个网络。 客户端是以太坊的实现，它根据协议规则验证数据并保持网络安全。

合并后的以太坊由两部分组成：执行层和共识层。 这两层网络是由不同的客户端软件运行。 在本页面，我们分别称他们为“执行客户端”和“共识客户端”。
- 执行客户端（也称为执行引擎、EL 客户端或旧称“以太坊 1”客户端）侦听网络中广播的新交易，在以太坊虚拟机中执行它们，并保存所有当前以太坊数据的最新状态和数据库。
- 共识客户端（也称为信标节点、CL 客户端或旧称“以太坊 2”客户端）实现了权益证明共识算法，使网络能够根据来自执行客户端的经过验证的数据达成一致。

在合并之前，共识层和执行层是独立的网络，以太坊上的所有交易和用户活动都发生在现在的执行层。 一个客户端软件为矿工生产的区块提供执行环境和共识验证。 2020 年 12 月后，共识层即信标链一直单独运行。 它引入了权益证明，并根据来自以太坊网络的数据协调验证者网络。

通过合并，以太坊连接这些网络并过渡到权益证明。 执行客户端和共识客户端共同验证以太坊的状态。

各种软件协同工作的模块化设计称为封装复杂性(opens in a new tab)↗。 这种方法更轻松地实现了顺利合并，并支持各客户端的重用，例如在二层网络生态系统中的重用。

### 客户端多样性
执行客户端和共识客户端采用各种不同编程语言编写，并由不同团队开发。

多种客户端实现减少了对于单一代码库的依赖，使网络更强大。 理想的目标是实现多样性，即没有任何客户端在网络中占据主导地位，从而排除潜在的单点故障。 语言多样化令开发者社区更加广泛，并允许他们用自己喜欢的语言创建集成。

## 节点类型
如果你想运行自己的节点，就应该明白节点有几种不同类型并且使用数据的方式亦不同。 事实上，客户端可以运行三种不同类型的节点：轻节点、全节点和归档节点。 还有不同同步策略的选项，可以实现更快的同步时间。 同步是指节点能以多快的速度获取最新以太坊状态信息。

### 全节点
- 存储全部区块链数据（会定期修剪，所以全节点并不存储包含创世块在内的所有状态数据）
- 参与区块验证，验证所有区块和状态。
- 所有状态都可以从全节点中获取（尽管非常久远的状态是通过向归档节点发出请求重建的）。
- 为网络提供服务，并应要求提供数据。

### 轻节点
- 轻节点不下载所有区块，而是下载区块头。 这些区块头只包含区块内容的摘要信息。 
- 轻节点所需的任何其他信息都从全节点请求。 然后，轻节点可以根据区块头中的状态根独自验证收到的数据。
- 轻节点可以让用户加入以太坊网络，无需运行全节点所需的功能强大的硬件或高带宽。 最终，轻节点也许能在手机和嵌入式设备中运行。 
- 轻节点不参与共识（即它们不能成为矿工或验证者），但可以访问以太坊区块链，其功能与全节点相同。

执行客户端 Geth 有一个轻量同步(opens in a new tab)↗选项。 然而，Geth 轻节点依赖于提供轻节点数据的全节点。 很少有全节点选择提供轻节点数据，这意味着轻节点通常无法找到对等节点。 共识层目前没有生产就绪的轻客户端，但是，有几个正在开发中。

可能还有一些方法可供在 gossip 网络(opens in a new tab)↗上提供轻客户端数据。 这是有利的，因为 gossip 网络可以支持轻节点网络，而无需全节点来满足请求。

以太坊目前还不支持大量轻节点，但轻节点支持是一个有望在不久的将来快速发展的领域。

### 归档节点
- 存储全节点中保存的所有内容，并建立历史状态存档。 如果你想查询区块 #4,000,000 的帐户余额，或者想简单可靠地测试自己的一组交易而不使用跟踪挖掘它们，则需要归档节点。
- 这些数据以太字节为单位，这使得归档节点对普通用户的吸引力较低，但对于区块浏览器、钱包供应商和链分析等服务来说却很方便。

以归档以外的任何方式同步客户端将导致区块链数据被修剪。 这意味着，没有所有历史状态的存档，但全节点能够在需要时构建它们。

## 为什么我要运行一个以太坊节点？
运行一个节点可以让你直接、无需信任和私密地使用以太坊，同时通过保持网络更加健壮和去中心化来支持网络。

### 对您的好处
运行你自己的节点使你能够以私有、自给自足和无需信任的方式使用以太坊。 你无需信任网络，因为你可以使用自己的客户端验证数据。 “不要信任，就验证”是流行的区块链口头禅。
- 你的节点根据共识规则独自验证所有交易和区块。 这意味着你不必依赖网络中的任何其他节点或完全信任它们。
- 你可以将以太坊钱包与你自己的节点一起使用。 你可以更安全、更私密地使用去中心化应用程序，因为你不必将地址和余额泄露给随机节点。 你可以用自己的客户端检查所有内容。 MetaMask(opens in a new tab)↗、Frame(opens in a new tab)↗ 和许多其他钱包提供远程过程调用导入，这让它们可以使用你的节点。
- 你可以运行和自我托管其他依赖于以太坊数据的服务。 例如，可以是信标链验证者、二层网络等软件、基础设施、区块浏览器、支付机构等。
- 你可以提供自己的自定义远程过程调用端点。 公开供社区使用，甚至私有托管的以太坊端点可以让用户使用你的节点，并避免大型中心化提供商。
- 你可以使用进程间通信 (IPC) 连接到节点，或者重写节点将你的程序作为插件加载。 这样可以减少网络延迟，例如在使用 web3 库处理大量数据时或者当你需要尽快替换交易时（即抢先交易）会带来很大帮助。
- 你可以直接质押以太币以保护网络并获得奖励。 请参见单独质押开始操作。

### 对网络的好处
多种节点对以太坊的健康、安全和运行恢复能力非常重要。
- 全节点强制执行共识规则，因此无法欺骗它们接受不遵循规则的区块。 这在网络中提供了额外的安全性，因为如果所有节点都是轻节点，不进行完整验证，验证者可能会攻击网络。
- 如果遇到攻击并且攻破了权益证明加密经济防御，全节点可以执行社交恢复以选择跟随最诚实的链。
- 网络中的节点越多，网络就更加多样化和更加健壮，这是去中心化的最终目标，可实现一个抗审查的可靠系统。
- 这些节点让依赖它们的轻客户端能够访问区块链数据。 在使用高峰期，需要有足够多的全节点帮助轻节点同步。 轻节点不存储整条区块链，而是通过区块头中的状态根验证数据。 如果需要，它们可以请求区块提供更多信息。

如果你运行一个全节点，整个以太坊网络将从中受益。

## 执行客户端（原“ETH1 客户端”）
以太坊社区维护着多种开放源代码的执行客户端（以前称为“以太坊 1 客户端”，或仅称为“以太坊客户端”），它们由不同的团队使用不同的编程语言开发。 这使得网络更加健壮，更加多样化。 理想的目标是实现多样性，即没有任何客户端占据主导地位，从而减少任何单点故障。

下表汇总了不同的客户端。 这些客户端均通过客户端测试(opens in a new tab)↗，并得到积极维护以保持与网络升级同步。

|客户端	|语言	|操作系统：	|网络	|同步策略	|状态缓冲
|---|---|---|---|---|---|
|Geth(opens in a new tab)↗	|Go	|Linux、Windows、macOS	|主网、Sepolia、Görli、Ropsten、Rinkeby	|快照、完全	|Archive、Pruned|
|Nethermind(opens in a new tab)↗	|C#、.NET	|Linux、Windows、macOS	|主网、Sepolia、Görli、Ropsten、Rinkeby 等	|快照（不提供服务）、快速、完全	|Archive、Pruned
|Besu(opens in a new tab)↗	|Java	|Linux、Windows、macOS	|主网、Sepolia、Görli、Ropsten、Rinkeby 等	|快速、完全	|Archive、Pruned|
|Erigon(opens in a new tab)↗	|Go	|Linux、Windows、macOS	|主网、Sepolia、Görli、Rinkeby、Ropsten 等	|完全	|Archive、Pruned|




























